# Default plots for the Opinionet model
---
graph:
  based_on: graph

  select:
    graph_group: nw

  graph_creation:
    at_time_idx: -1
    node_props: ['opinion']

  graph_drawing:
    positions:
      model: spring
      k: 1
      iterations: 2
    nodes:
      node_color:
        from_property: opinion
      node_size:
        from_property: degree
        scale_to_interval: [10, 200]
    edges:
      width: 0.2

  helpers:
    set_title:
      title: Final Graph


opinion_animated:
  based_on: opinion_animated
  animation:
    animation_update_kwargs:
      stepsize: 10
  helpers:
    set_title:
      title: Opinion distribution


opinion_time_series:
  based_on: time_series_opinion
  select:
    opinion: nw/opinion

  opinion_range: [0., 1.]

  representatives:
    enabled: True
    max_reps: 5
    rep_threshold: 10

  density_kwargs:
    vmin: 0
    vmax: 25


localization_over_tolerance:
  based_on: sweep

  select_and_combine:
    base_path: data/Opinionet
    fields:
      tolerance:
        path: nw/opinion
        transform:
          - .coords: [ !dag_prev , tolerance]
      localization:
        path: nw/opinion
        transform:
          - operation: op_localization
            args: [ !dag_prev ]
            kwargs:
              bins: 100
              range: [0., 1.]

  transform:
    - xr.Dataset:
        - x: !dag_tag tolerance
          y: !dag_tag localization
          yerr: 0
      tag: data

  ds: data
  x: x
  y: y
  y_err: y_err

  capsize: 2
  marker: o

  enabled: False
