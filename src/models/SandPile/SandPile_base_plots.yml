# Base configurations for SandPile model plots
---
# --- A plot of the slope (mean - critical_slope)
mean_slope:
  based_on: .default_style_and_helpers

  creator: universe
  universes: all
  
  # Use the SandPile-specific plot functions
  module: model_plots.SandPile
  plot_func: mean_slope

  # Arguments passed to plt.plot
  linestyle: 'None'
  marker: '.'


# --- Plot the avalanche area fraction time series
area_fraction:
  based_on: .time_series.density

  # Adjust helpers
  helpers:
    set_labels:
      y: Avalanche Area $[1/A]$
    set_scales:
      y: log
    set_limits:
      y: [min, 1.]
    set_title:
      title: Avalanche Size Area Fraction

  # Specify which data to use
  model_name: SandPile
  path_to_data: avalanche
  threshold: .5
  mean_of: [x, y]

  # And that the avalanche sizes are to be used as dot sizes
  sizes_from: avalanche_size

  # Arguments passed on to plt.scatter


# --- A plot of the cluster size distribution
cluster_size_distribution:
  based_on: .distribution.histogram

  # Specify which data to calculate the histogram of
  model_name: SandPile
  path_to_data: avalanche_size
  only_unique: true

  # Set scales, limits, and title
  helpers:
    set_scales:
      x: log
      y: log
    set_labels:
      x: Cluster Size $[A]$
      y: Counts
    set_limits:
      y: [1, ~]
    set_title:
      title: Cluster Size Distribution

  # Arguments passed to plt.plot


# --- A plot of the complementary cumulative probability distribution
compl_cum_prob_dist:
  based_on: .distribution.compl_cum_prob_dist

  # Specify basic configuration for this model
  model_name: SandPile
  path_to_data: avalanche_size

  # Arguments passed to plt.plot


# -- Any kind of grid animation
grid_animation:
  based_on: .ca.state

  model_name: SandPile

  # Use the first time index; is ignored in animation
  time_idx: 0

  # Enable the animation, using ffmpeg and .mp4 output by default
  file_ext: mp4
  animation:
    enabled: true
    writer: ffmpeg    # can be: frames, ffmpeg (if installed), ...
